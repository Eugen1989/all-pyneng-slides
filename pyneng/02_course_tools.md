## Python для сетевых инженеров 

---
## Работа с заданиями

* Git - позволяет хранить историю изменений, кто выполнил изменения и позволяет посмотреть какие именно изменения были внесены.
* GitHub - используется для централизованного хранения файлов. Это дает возможность работать с заданиями из дома или на работе, без необходимости копировать файлы.
* pyneng - скрипт для проверки заданий, просмотра вариантов решения и сдачи заданий на проверку

---
### Git

---
### Система контроля версий

Система контроля версий (Version Control System, VCS):
* отслеживает изменения в файлах
* хранит несколько версий одного файла
* позволяет откатить изменения
* знает кто и когда сделал изменения

---
### Git

* распределенная система контроля версий
* широко используется
* выпущен под лицензией GNU GPL v2


---
### Git

Файл в Git может быть в таких состояниях:

* committed - файл сохранен в локальной базе
* modified - файл был изменен, но еще не сохранен в локальной базе
* staged - файл отмечен на добавление в следующий commit

---
### Git

Три основные части проекта Git:

* каталог Git (.git) - тут хранятся метаданные и база данных объектов проект
* рабочий каталог -  копия определённой версии проекта
* область подготовленных файлов (staging area) - информация о том, что должно попасть в следующий commit

---
### Основы Git

---
### Первичная настройка Git

Для начала работы с Git необходимо указать имя и email пользователя, которые будут использоваться в commit:

```
$ git config --global user.name "username"
$ git config --global user.email "username@example.com"
```

Посмотреть настройки можно таким образом:
```
$ git config --list
```

---
### Инициализация локального репозитория

```
[~/tools/first_repo]
$ git init
Initialized empty Git repository in /home/vagrant/tools/first_repo/.git/
```

После команды git init, в каталоге создается каталог .git, в котором содержится вся информация, которая необходима для работы Git.

---
### Команды git

* ``git status`` - показывает состояния файлов в рабочем каталоге и индексе: какие файлы изменены, но не добавлены в индекс; какие ожидают коммита в индексе. 
* ``git add`` - добавляет содержимое рабочего каталога в индекс (staging area) для последующего коммита
* ``git commit`` - берёт все данные, добавленные в индекс с помощью git add, и сохраняет их
* ``git push`` - используется для установления связи с удалённым репозиторием, вычисления локальных изменений отсутствующих в нём, и собственно их передачи в репозиторий
* ``git pull`` - git вначале забирает изменения из указанного удалённого репозитория, а затем пытается слить их с текущей веткой

---
### .gitignore

.README.un~ - это служебный файл, который не нужно добавлять в репозиторий.

В git есть возможность сказать, что какие-то файлы или каталоги нужно игнорировать.
Для этого, надо указать соответствующие шаблоны в файле .gitignore в текущем каталоге:

Для того чтобы git игнорировал undo файлы vim, можно добавить, например, такую строку в файл .gitignore:
```
*.un~
```

Это значит, что Git должен игнорировать все файлы, которые заканчиваются на ```.un~```.

---
### .gitignore

После этого, git status показывает:

![alt](https://pyneng.github.io/assets/images/git_status_2.png)

---
## [Отображение статуса репозитория в командной строке](https://pyneng.github.io/docs/git-prompt/)

> Нужно на Linux/Mac OS, для Windows автоматически показывается при использовании Cmder.

---
### Структура статуса

* ``(master↑3|✚1)``: on branch ``master``, ahead of remote by 3 commits, 1 file changed but not staged
* ``(status|●2)``: on branch ``status``, 2 files staged
* ``(master|✚7…)``: on branch ``master``, 7 files changed, some files untracked
* ``(master|✖2✚3)``: on branch ``master``, 2 conflicts, 3 files changed
* ``(master|⚑2)``: on branch ``master``, 2 stash entries
* ``(experimental↓2↑3|✔)``: on branch ``experimental``; your branch has diverged by 3 commits, remote by 2 commits; the repository is otherwise clean
* ``(:70c2952|✔)``: not on any branch; parent commit has hash ``70c2952``; the repository is otherwise clean

---
### Структура статуса

By default, the general appearance of the prompt is::

```
(<branch> <upstream branch> <branch tracking>|<local status>)
```

- Local Status Symbols
  - ``✔``: repository clean
  - ``●n``: there are ``n`` staged files
  - ``✖n``: there are ``n`` files with merge conflicts
  - ``✖-n``: there are ``n`` staged files waiting for removal
  - ``✚n``: there are ``n`` changed but *unstaged* files
  - ``…n``: there are ``n`` untracked files
  - ``⚑n``: there are ``n`` stash entries
- Upstream branch
  - Shows the remote tracking branch
  - Disabled by default
  - Enable by setting GIT_PROMPT_SHOW_UPSTREAM=1
- Branch Tracking Symbols
  - ``↑n``: ahead of remote by ``n`` commits
  - ``↓n``: behind remote by ``n`` commits
  - ``↓m↑n``: branches diverged, other by ``m`` commits, yours by ``n`` commits
  - ``L``: local branch, not remotely tracked

---
### Дополнительные возможности git

---
### git diff

Команда git diff позволяет просмотреть разницу между различными состояниями.

Например, внесем изменения в файл README и .gitignore, но не будем добавлять их в репозиторий.
Команда git status показывает, что оба файла изменены:

![alt](https://pyneng.github.io/assets/images/git_status_5.png)

---
### git diff

Команда git diff показывает какие изменения были внесены с последнего коммита:

![alt](https://pyneng.github.io/assets/images/git_diff.png)


---
### git diff

Если теперь добавить изменения в файлах, и ещё раз выполнить команду git diff, она ничего не покажет:

![alt](https://pyneng.github.io/assets/images/git_add_git_diff.png)

---
### git diff

Чтобы показать отличия между staging и последним коммитом, надо добавить параметр --staged (или --cached):

![alt](https://pyneng.github.io/assets/images/git_diff_staged.png)

---
## Github

---
### Github

Для работы с заданиями на курсе используются Git и GitHub.

* Git - позволяет хранить историю изменений, кто выполнил изменения и позволяет посмотреть какие именно изменения были внесены.
* GitHub - используется для централизованного хранения файлов. Это дает возможность работать с заданиями из дома или на работе, без необходимости копировать файлы.

---
### Репозитории на курсе

* Репозиторий слушателя - это репозиторий, который создан инструктором для выполнения заданий на курсе. Имя репозитория будет online-12-имя-фамилия.
* [Репозиторий курса](https://github.com/pyneng/pyneng-online-12-jan-may-2022) - тут хранятся примеры кода, которые показывались на лекциях и несколько вспомогательных файлов

---
### Работа с репозиторием слушателя

Обычно, последовательность работы будет такой*:

* перед началом работы, синхронизируете локальное содержимое с GitHub командой git pull (синхронизация из GitHub в локальный репозиторий)
* редактируете какие-то файлы репозитория
* добавляете их в staging командой git add
* делаете commit с помощью git commit
* когда вы готовы закачать локальные изменения на GitHub, делаете git push


Если вы работаете с заданиями с работы и дома, надо не забывать первый и последний шаг:

* первый шаг - обновляет ваш локальный репозиторий на виртуалке
* последний шаг - загружает изменения на GitHub


---
## Скрипт pyneng.py

---
### Как проверять задания, смотреть варианты решения и сдавать на проверку

Кроме того, надо разобраться с тем как проверять задания тестами, смотреть варианты решения
и сдавать задания на проверку. Все эти операции выполняет скрипт pyneng. Подробнее:

* [Установка и подготовка к работе с pyneng](https://pyneng.github.io/docs/pyneng-prepare/)
* [Как проверять задания, смотреть варианты решения и сдавать на проверку](https://pyneng.github.io/docs/pyneng/)

---
### Работа с репозиторием слушателя с утилитой pyneng

> перед началом работы, синхронизируете локальное содержимое с GitHub командой git pull (синхронизация из GitHub в локальный репозиторий)

Этапы работы с заданиями:

1. Выполнение заданий
2. Проверка, что задание отрабатывает как нужно ``python task_4_2.py`` или запуск скрипта в редакторе/IDE
3. Проверка заданий тестами ``pyneng 1-5``
4. Если тесты проходят, смотрим варианты решения ``pyneng 1-5 -a``
5. Сдача заданий на проверку ``pyneng 1-5 -c`` 


> Второй шаг очень важен, потому что на этом этапе намного проще найти ошибки в синтаксисе
> и подобные проблемы с работой скрипта, чем при запуске кода через тест на 3 этапе.
